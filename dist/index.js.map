{"version":3,"sources":["../src/hooks/useDataService.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient, UseQueryOptions, UseMutationOptions } from '@tanstack/react-query';\nimport { BaseService, QueryOptions, PaginationOptions } from '../services/BaseService';\n\n/**\n * Hook for data service operations with React Query\n */\nexport function useDataService<T = any>(service: BaseService, resourceName: string) {\n  const queryClient = useQueryClient();\n\n  // Get all records\n  const useGetAll = (\n    options: QueryOptions = {},\n    queryOptions?: Omit<UseQueryOptions<T[], Error>, 'queryKey' | 'queryFn'>\n  ) => {\n    return useQuery({\n      queryKey: [resourceName, 'list', options],\n      queryFn: () => service.getAll(options),\n      ...queryOptions,\n    });\n  };\n\n  // Get paginated records\n  const useGetPaginated = (\n    options: QueryOptions & PaginationOptions = {},\n    queryOptions?: Omit<UseQueryOptions<any, Error>, 'queryKey' | 'queryFn'>\n  ) => {\n    return useQuery({\n      queryKey: [resourceName, 'paginated', options],\n      queryFn: () => service.getPaginated(options),\n      ...queryOptions,\n    });\n  };\n\n  // Get record by ID\n  const useGetById = (\n    id: string | number | null,\n    select = '*',\n    queryOptions?: Omit<UseQueryOptions<T, Error>, 'queryKey' | 'queryFn'>\n  ) => {\n    return useQuery({\n      queryKey: [resourceName, 'detail', id, select],\n      queryFn: () => service.getById(id!, select),\n      enabled: id !== null && id !== undefined,\n      ...queryOptions,\n    });\n  };\n\n  // Search records\n  const useSearch = (\n    searchTerm: string,\n    searchFields: string[] = ['name'],\n    options: QueryOptions = {},\n    queryOptions?: Omit<UseQueryOptions<T[], Error>, 'queryKey' | 'queryFn'>\n  ) => {\n    return useQuery({\n      queryKey: [resourceName, 'search', searchTerm, searchFields, options],\n      queryFn: () => service.search(searchTerm, searchFields, options),\n      enabled: searchTerm.length > 0,\n      ...queryOptions,\n    });\n  };\n\n  // Count records\n  const useCount = (\n    filters?: Record<string, any>,\n    queryOptions?: Omit<UseQueryOptions<number, Error>, 'queryKey' | 'queryFn'>\n  ) => {\n    return useQuery({\n      queryKey: [resourceName, 'count', filters],\n      queryFn: () => service.count(filters),\n      ...queryOptions,\n    });\n  };\n\n  // Create mutation\n  const useCreate = () => {\n    return useMutation({\n      mutationFn: (data: Record<string, any>) => service.create(data),\n      onSuccess: () => {\n        queryClient.invalidateQueries({ queryKey: [resourceName] });\n      },\n    });\n  };\n\n  // Update mutation\n  const useUpdate = () => {\n    return useMutation({\n      mutationFn: ({ id, data }: { id: string | number; data: Record<string, any> }) => \n        service.update(id, data),\n      onSuccess: (data, variables) => {\n        queryClient.setQueryData([resourceName, 'detail', variables.id], data);\n        queryClient.invalidateQueries({ queryKey: [resourceName, 'list'] });\n        queryClient.invalidateQueries({ queryKey: [resourceName, 'paginated'] });\n      },\n    });\n  };\n\n  // Delete mutation\n  const useDelete = () => {\n    return useMutation({\n      mutationFn: (id: string | number) => service.delete(id),\n      onSuccess: (_, variables) => {\n        queryClient.removeQueries({ queryKey: [resourceName, 'detail', variables] });\n        queryClient.invalidateQueries({ queryKey: [resourceName, 'list'] });\n        queryClient.invalidateQueries({ queryKey: [resourceName, 'paginated'] });\n      },\n    });\n  };\n\n  // Bulk delete mutation\n  const useBulkDelete = () => {\n    return useMutation({\n      mutationFn: (ids: (string | number)[]) => service.bulkDelete(ids),\n      onSuccess: (_, variables) => {\n        variables.forEach(id => {\n          queryClient.removeQueries({ queryKey: [resourceName, 'detail', id] });\n        });\n        queryClient.invalidateQueries({ queryKey: [resourceName, 'list'] });\n        queryClient.invalidateQueries({ queryKey: [resourceName, 'paginated'] });\n      },\n    });\n  };\n\n  return {\n    // Queries\n    useGetAll,\n    useGetPaginated,\n    useGetById,\n    useSearch,\n    useCount,\n    \n    // Mutations\n    useCreate,\n    useUpdate,\n    useDelete,\n    useBulkDelete,\n    \n    // Utilities\n    invalidateAll: () => queryClient.invalidateQueries({ queryKey: [resourceName] }),\n    invalidateList: () => {\n      queryClient.invalidateQueries({ queryKey: [resourceName, 'list'] });\n      queryClient.invalidateQueries({ queryKey: [resourceName, 'paginated'] });\n    },\n    invalidateDetail: (id: string | number) => \n      queryClient.invalidateQueries({ queryKey: [resourceName, 'detail', id] }),\n  };\n}"],"mappings":"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","names":[]}